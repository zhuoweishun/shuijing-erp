# å­—æ®µå‘½åè§„èŒƒæ£€æŸ¥ç»¼åˆæŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œæ¦‚è¦

**æ£€æŸ¥æ—¶é—´**: 2025å¹´1æœˆ16æ—¥  
**æ£€æŸ¥èŒƒå›´**: å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ã€å­—æ®µè½¬æ¢å·¥å…·  
**æ‰«ææ–‡ä»¶æ•°**: 97ä¸ª  
**å‘ç°é—®é¢˜**: 1,341ä¸ªå­—æ®µå‘½åè¿è§„  

## ğŸš¨ é—®é¢˜ä¸¥é‡ç¨‹åº¦è¯„ä¼°

| ä¸¥é‡ç¨‹åº¦ | é—®é¢˜æ•°é‡ | å½±å“èŒƒå›´ | ä¿®å¤ä¼˜å…ˆçº§ |
|----------|----------|----------|------------|
| ğŸ”´ ä¸¥é‡ | 1,341ä¸ª | å…¨ç³»ç»Ÿ | ç«‹å³ä¿®å¤ |
| ğŸŸ¡ ä¸­ç­‰ | 0ä¸ª | - | - |
| ğŸŸ¢ è½»å¾® | 0ä¸ª | - | - |

## ğŸ“Š è¯¦ç»†æ£€æŸ¥ç»“æœ

### 1. å‰ç«¯ä»£ç æ£€æŸ¥ç»“æœ
- **æ€»è¿è§„æ•°**: 918ä¸ª
- **åº”ä½¿ç”¨æ ¼å¼**: snake_case
- **å®é™…ä½¿ç”¨**: 60% camelCase, 25% PascalCase, 15% unknown
- **çŠ¶æ€**: ğŸ”´ ä¸¥é‡ä¸ç¬¦åˆè§„èŒƒ

### 2. åç«¯ä»£ç æ£€æŸ¥ç»“æœ
- **æ€»è¿è§„æ•°**: 423ä¸ª
- **åº”ä½¿ç”¨æ ¼å¼**: camelCase
- **å®é™…ä½¿ç”¨**: 70% snake_case, 20% unknown, 10% PascalCase
- **çŠ¶æ€**: ğŸ”´ ä¸¥é‡ä¸ç¬¦åˆè§„èŒƒ

### 3. æ•°æ®åº“Schemaæ£€æŸ¥ç»“æœ
- **æ€»è¿è§„æ•°**: 0ä¸ª
- **ä½¿ç”¨æ ¼å¼**: snake_case
- **çŠ¶æ€**: âœ… å®Œå…¨ç¬¦åˆè§„èŒƒ

### 4. å­—æ®µè½¬æ¢å·¥å…·æ£€æŸ¥ç»“æœ
- **æ˜ å°„è¡¨è¦†ç›–åº¦**: 115ä¸ªå­—æ®µ
- **ä¸ä¸€è‡´é—®é¢˜**: 0ä¸ª
- **çŠ¶æ€**: âœ… å·¥å…·æœ¬èº«è‰¯å¥½ï¼Œéœ€æ‰©å±•è¦†ç›–åº¦

## ğŸ¯ æ ¸å¿ƒæ¨¡å—é—®é¢˜åˆ†æ

### SKUæ¨¡å— ğŸ”´ ä¸¥é‡
- **å‰ç«¯å­—æ®µ**: 77ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šcamelCase, snake_case, PascalCaseï¼‰
- **åç«¯å­—æ®µ**: 56ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šcamelCase, snake_case, PascalCaseï¼‰
- **å…³é”®é—®é¢˜**: available_quantity/availableQuantity, sku_code/skuCode

### Customeræ¨¡å— ğŸ”´ ä¸¥é‡
- **å‰ç«¯å­—æ®µ**: 51ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šPascalCase, camelCase, snake_case, unknownï¼‰
- **åç«¯å­—æ®µ**: 32ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šcamelCase, snake_caseï¼‰
- **å…³é”®é—®é¢˜**: customer_name/customerName, total_purchases/totalPurchases

### Purchaseæ¨¡å— ğŸ”´ ä¸¥é‡
- **å‰ç«¯å­—æ®µ**: 87ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šsnake_case, camelCase, PascalCaseï¼‰
- **åç«¯å­—æ®µ**: 80ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šcamelCase, snake_case, unknownï¼‰
- **å…³é”®é—®é¢˜**: purchase_code/purchaseCode, product_name/productName

### Productæ¨¡å— ğŸ”´ ä¸¥é‡
- **å‰ç«¯å­—æ®µ**: 105ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šsnake_case, camelCase, PascalCaseï¼‰
- **åç«¯å­—æ®µ**: 75ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šcamelCase, snake_caseï¼‰
- **å…³é”®é—®é¢˜**: product_type/productType, total_quantity/totalQuantity

### Financialæ¨¡å— ğŸŸ¡ ä¸­ç­‰
- **å‰ç«¯å­—æ®µ**: 4ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šPascalCase, camelCase, snake_caseï¼‰
- **åç«¯å­—æ®µ**: 6ä¸ªï¼ˆæ··åˆä½¿ç”¨ï¼šcamelCase, snake_caseï¼‰
- **å…³é”®é—®é¢˜**: total_cost/totalCost, stale_ratio/staleRatio

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### é˜¶æ®µ1ï¼šç´§æ€¥ä¿®å¤ï¼ˆ1-2å¤©ï¼‰

#### 1.1 SKUæ ¸å¿ƒå­—æ®µä¿®å¤
**å‰ç«¯ä¿®å¤**:
```typescript
// ä¿®å¤æ–‡ä»¶ï¼šsrc/components/SkuSellForm.tsx, SkuAdjustForm.tsx, SkuDestroyForm.tsx
// ä¿®å¤å‰
sku.availableQuantity â†’ sku.available_quantity
sku.skuCode â†’ sku.sku_code
sku.skuName â†’ sku.sku_name
sku.totalQuantity â†’ sku.total_quantity
sku.unitPrice â†’ sku.unit_price
sku.sellingPrice â†’ sku.selling_price
```

**åç«¯ä¿®å¤**:
```typescript
// ä¿®å¤æ–‡ä»¶ï¼šbackend/src/routes/skus.ts
// ä¿®å¤å‰
sku_code â†’ skuCode
sku_name â†’ skuName
available_quantity â†’ availableQuantity
remaining_quantity â†’ remainingQuantity
```

#### 1.2 Customeræ ¸å¿ƒå­—æ®µä¿®å¤
**å‰ç«¯ä¿®å¤**:
```typescript
// ä¿®å¤æ–‡ä»¶ï¼šsrc/components/CustomerCreateModal.tsx, CustomerDetailModal.tsx
customer.customerName â†’ customer.customer_name
customer.customerPhone â†’ customer.customer_phone
customer.totalPurchases â†’ customer.total_purchases
```

**åç«¯ä¿®å¤**:
```typescript
// ä¿®å¤æ–‡ä»¶ï¼šbackend/src/routes/customers.ts
total_customers â†’ totalCustomers
new_customers â†’ newCustomers
repeat_customers â†’ repeatCustomers
```

### é˜¶æ®µ2ï¼šé‡è¦ä¿®å¤ï¼ˆ2-3å¤©ï¼‰

#### 2.1 Purchaseæ¨¡å—ä¿®å¤
#### 2.2 Productæ¨¡å—ä¿®å¤
#### 2.3 å­—æ®µè½¬æ¢å·¥å…·æ‰©å±•

### é˜¶æ®µ3ï¼šå…¨é¢ä¼˜åŒ–ï¼ˆ1-2å¤©ï¼‰

#### 3.1 Financialæ¨¡å—ä¿®å¤
#### 3.2 ç»„ä»¶äº¤äº’å­—æ®µç»Ÿä¸€
#### 3.3 åˆ†é¡µå’Œç»Ÿè®¡å­—æ®µè§„èŒƒ

## ğŸ“ å…·ä½“ä¿®å¤æ¸…å•

### é«˜ä¼˜å…ˆçº§ä¿®å¤æ–‡ä»¶

**å‰ç«¯æ–‡ä»¶**:
1. `src/components/SkuSellForm.tsx` - SKUé”€å”®è¡¨å•
2. `src/components/SkuAdjustForm.tsx` - SKUè°ƒæ•´è¡¨å•
3. `src/components/SkuDestroyForm.tsx` - SKUé”€æ¯è¡¨å•
4. `src/components/CustomerCreateModal.tsx` - å®¢æˆ·åˆ›å»ºæ¨¡æ€æ¡†
5. `src/pages/SalesList.tsx` - SKUé”€å”®åˆ—è¡¨é¡µé¢
6. `src/pages/ProductEntry.tsx` - äº§å“å½•å…¥é¡µé¢

**åç«¯æ–‡ä»¶**:
1. `backend/src/routes/skus.ts` - SKUç›¸å…³API
2. `backend/src/routes/customers.ts` - å®¢æˆ·ç›¸å…³API
3. `backend/src/routes/products.ts` - äº§å“ç›¸å…³API
4. `backend/src/routes/financial.ts` - è´¢åŠ¡ç›¸å…³API
5. `backend/src/utils/skuUtils.js` - SKUå·¥å…·å‡½æ•°

### å­—æ®µè½¬æ¢å·¥å…·æ‰©å±•

**éœ€è¦æ·»åŠ çš„æ˜ å°„**:
```typescript
// ç«‹å³æ·»åŠ çš„æ ¸å¿ƒæ˜ å°„
const URGENT_MAPPINGS = {
  // SKUç›¸å…³
  availableQuantity: 'available_quantity',
  skuCode: 'sku_code',
  skuName: 'sku_name',
  totalQuantity: 'total_quantity',
  
  // Customerç›¸å…³
  customerName: 'customer_name',
  customerPhone: 'customer_phone',
  totalPurchases: 'total_purchases',
  totalCustomers: 'total_customers',
  newCustomers: 'new_customers',
  
  // Purchaseç›¸å…³
  purchaseCode: 'purchase_code',
  productName: 'product_name',
  totalPrice: 'total_price',
  
  // åˆ†é¡µç›¸å…³
  pageNum: 'page_num',
  totalPages: 'total_pages'
};
```

## ğŸ§ª æµ‹è¯•éªŒè¯è®¡åˆ’

### 1. å•å…ƒæµ‹è¯•
- å­—æ®µè½¬æ¢å·¥å…·æµ‹è¯•
- APIæ¥å£å­—æ®µæ ¼å¼æµ‹è¯•
- ç»„ä»¶å­—æ®µä½¿ç”¨æµ‹è¯•

### 2. é›†æˆæµ‹è¯•
- å‰åç«¯æ•°æ®ä¼ è¾“æµ‹è¯•
- SKUæ“ä½œæµç¨‹æµ‹è¯•
- å®¢æˆ·ç®¡ç†æµç¨‹æµ‹è¯•
- é‡‡è´­å½•å…¥æµç¨‹æµ‹è¯•

### 3. å›å½’æµ‹è¯•
- å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
- æ•°æ®ä¸€è‡´æ€§éªŒè¯
- æ€§èƒ½å½±å“è¯„ä¼°

## ğŸ“‹ å®æ–½æ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | è´Ÿè´£äºº | çŠ¶æ€ |
|------|------|----------|--------|------|
| é˜¶æ®µ1 | SKUæ ¸å¿ƒå­—æ®µä¿®å¤ | 1å¤© | å¼€å‘å›¢é˜Ÿ | å¾…å¼€å§‹ |
| é˜¶æ®µ1 | Customeræ ¸å¿ƒå­—æ®µä¿®å¤ | 0.5å¤© | å¼€å‘å›¢é˜Ÿ | å¾…å¼€å§‹ |
| é˜¶æ®µ1 | å­—æ®µè½¬æ¢å·¥å…·æ‰©å±• | 0.5å¤© | å¼€å‘å›¢é˜Ÿ | å¾…å¼€å§‹ |
| é˜¶æ®µ2 | Purchaseæ¨¡å—ä¿®å¤ | 1å¤© | å¼€å‘å›¢é˜Ÿ | å¾…å¼€å§‹ |
| é˜¶æ®µ2 | Productæ¨¡å—ä¿®å¤ | 1å¤© | å¼€å‘å›¢é˜Ÿ | å¾…å¼€å§‹ |
| é˜¶æ®µ3 | Financialæ¨¡å—ä¿®å¤ | 0.5å¤© | å¼€å‘å›¢é˜Ÿ | å¾…å¼€å§‹ |
| é˜¶æ®µ3 | å…¨é¢æµ‹è¯•éªŒè¯ | 1å¤© | æµ‹è¯•å›¢é˜Ÿ | å¾…å¼€å§‹ |

**æ€»é¢„è®¡æ—¶é—´**: 5-6å¤©

## ğŸ¯ æˆåŠŸæ ‡å‡†

### å®šé‡æŒ‡æ ‡
- å­—æ®µå‘½åè¿è§„æ•°é‡ï¼šä»1,341ä¸ªé™è‡³0ä¸ª
- å­—æ®µè½¬æ¢å·¥å…·è¦†ç›–åº¦ï¼šä»115ä¸ªæå‡è‡³200+ä¸ª
- æ ¸å¿ƒæ¨¡å—å­—æ®µä¸€è‡´æ€§ï¼šè¾¾åˆ°100%

### å®šæ€§æŒ‡æ ‡
- å‰ç«¯ç»Ÿä¸€ä½¿ç”¨snake_case
- åç«¯ç»Ÿä¸€ä½¿ç”¨camelCase
- APIæ•°æ®ä¼ è¾“æ— å­—æ®µä¸åŒ¹é…é”™è¯¯
- ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§æ˜¾è‘—æå‡

## ğŸš€ åç»­æ”¹è¿›å»ºè®®

### 1. è‡ªåŠ¨åŒ–æ£€æŸ¥
- åœ¨CI/CDæµæ°´çº¿ä¸­é›†æˆå­—æ®µå‘½åæ£€æŸ¥
- æ·»åŠ pre-commité’©å­æ£€æŸ¥å­—æ®µå‘½å
- å®šæœŸè¿è¡Œå­—æ®µå‘½åæ£€æŸ¥å·¥å…·

### 2. å¼€å‘è§„èŒƒ
- æ›´æ–°ç¼–ç è§„èŒƒæ–‡æ¡£
- æ·»åŠ å­—æ®µå‘½åæœ€ä½³å®è·µ
- å›¢é˜ŸåŸ¹è®­å’ŒçŸ¥è¯†åˆ†äº«

### 3. å·¥å…·æ”¹è¿›
- å¼€å‘VSCodeæ’ä»¶è‡ªåŠ¨æ£€æŸ¥å­—æ®µå‘½å
- é›†æˆESLintè§„åˆ™æ£€æŸ¥å­—æ®µæ ¼å¼
- è‡ªåŠ¨ç”Ÿæˆå­—æ®µæ˜ å°„è¡¨

## ğŸ“ è”ç³»ä¿¡æ¯

å¦‚æœ‰é—®é¢˜æˆ–éœ€è¦æ”¯æŒï¼Œè¯·è”ç³»ï¼š
- **æŠ€æœ¯è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ
- **é¡¹ç›®ç»ç†**: é¡¹ç›®ç®¡ç†å›¢é˜Ÿ
- **è´¨é‡ä¿è¯**: æµ‹è¯•å›¢é˜Ÿ

---

**ç»“è®º**: å½“å‰ç³»ç»Ÿå­˜åœ¨ä¸¥é‡çš„å­—æ®µå‘½åä¸ä¸€è‡´é—®é¢˜ï¼Œéœ€è¦ç«‹å³å¼€å§‹ä¿®å¤å·¥ä½œã€‚å»ºè®®æŒ‰ç…§æœ¬æŠ¥å‘Šçš„ä¿®å¤æ–¹æ¡ˆåˆ†é˜¶æ®µå®æ–½ï¼Œä¼˜å…ˆä¿®å¤æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼Œç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚