## 文档 10：文档总览与查询索引（整合所有文档）

### 一、文档清单与用途（快速导航）

| 文档编号 | 文档名称           | 核心用途                 | 关键章节                      | 适用角色        | 来源文档                 | 更新状态        |
| ---- | -------------- | -------------------- | ------------------------- | ----------- | -------------------- | ----------- |
| 01   | 系统架构与技术栈规范     | 查看技术栈版本、架构图、第三方配置    | 1.2 技术栈清单、2.3 第三方服务配置     | 前后端开发、运维    | 原 1.txt              | ✅ 已完善       |
| 02   | API 接口统一规范文档   | 对接接口、查看参数 / 响应 / 错误码 | 2.1 认证接口、2.2 采购接口、四 错误码表  | 前后端开发       | 原 2.txt + Login功能整合  | ✅ 已更新字段验证规则 |
| 03   | 数据库设计与数据规则文档   | 查看表结构、索引、库存视图逻辑      | 二 数据库架构、三.1 用户表、三.8 审计日志表 | 后端开发、DBA    | 原 3.txt + Login功能整合  | ✅ 已更新字段约束规则 |
| 04   | React 前端开发规范文档 | 前端组件开发、权限控制、Login认证  | 三 认证系统规范、四 核心组件、十 开发实践    | 前端开发        | 原 4.txt + Login功能整合  | ✅ 已添加编辑功能规范 |
| 05   | 业务流程详细规范文档     | 理解认证/采购/成品/库存核心流程    | 二 用户认证流程、三 采购录入流程、供应商管理   | 所有开发        | 原 5.txt + Login功能整合  | ✅ 已添加编辑业务流程 |
| 06   | UI/UX 设计规范文档   | 视觉设计、组件样式、鸿蒙端适配      | 2.1 色彩系统、3.1 按钮组件         | 前端开发、UI 设计师 | 原 6.txt              | ⏳ 待更新       |
| 07   | 错误处理与测试规范文档    | 错误类型、前端拦截、测试重点       | 1.1 错误分类、2.1Axios 拦截器     | 前后端开发、测试工程师 | 原 7.txt              | ⏳ 待创建       |
| 08   | 部署运维规范文档       | 环境配置、备份脚本、OSS 部署     | 1.2PM2 配置、2.1 备份脚本        | 运维工程师、后端开发  | 原 8.txt-11.txt（提取核心） | ⏳ 待创建       |
| 09   | 权限与安全规范文档      | 角色权限、敏感字段过滤、安全配置     | 1.1 权限矩阵、2.2 过滤实现         | 前后端开发、安全工程师 | 原 1.txt、3.txt、4.txt  | ⏳ 待创建       |
| 10   | 文档总览与查询索引      | 快速查找文档、术语统一          | 2. 术语对照表、3. 高频问题映射        | 所有角色        | 整合所有文档               | ✅ 持续更新      |

### 二、术语对照表（统一现有表述）

| 规范术语                  | 禁止表述 | 说明                 | 来源文档            |
| --------------------- | ---- | ------------------ | --------------- |
| 库存视图（inventory\_view） | 库存表  | 无物理表，实时计算生成        | 《数据库设计文档》3.6    |
| 雇员（employee）          | 员工   | 角色枚举值为 employee    | 《业务流程文档》1.2     |
| 批量导入                  | 批量上传 | 接口路径含 batch-import | 《API 接口规范文档》4.6 |
| 原材料成品                 | 库存成品 | 库存中的成品类别，属于原材料     | 《业务流程文档》6.1     |
| 销售成品                  | 制作成品 | 成品制作后的最终产品，进入销售列表  | 《业务流程文档》6.1     |
| 成品制作                  | 成品生产 | 将原材料转化为销售成品的过程     | 《业务流程文档》6.1     |
| 成品销毁                  | 成品删除 | 含库存回滚逻辑，非普通删除      | 《业务流程文档》6.3     |
| 克价（price\_per\_gram）  | 每克价格 | 统一字段名，避免歧义         | 《数据库设计文档》3.3    |
| 豆包AI服务                | AI识别 | 使用doubao-1.5-pro模型 | 《系统架构文档》2.3.1   |
| 网络检测模块                | 连接检测 | 动态IP检测和故障转移        | 《API接口规范文档》5.5  |
| 智能重试机制                | 自动重试 | 指数退避策略，最大3次重试      | 《错误处理规范文档》3.3   |

## 三、Login页面功能实现总结（最新更新）

### 3.1 已完成的功能模块

| 功能模块             | 实现状态 | 涉及文档 | 关键内容              |
| ---------------- | ---- | ---- | ----------------- |
| **用户认证API**      | ✅ 完成 | 文档02 | 登录、验证、登出接口规范      |
| **前端Login组件**    | ✅ 完成 | 文档04 | React组件、表单验证、状态管理 |
| **useAuth Hook** | ✅ 完成 | 文档04 | 认证状态管理、Token处理    |
| **登录业务流程**       | ✅ 完成 | 文档05 | 完整登录流程、异常处理       |
| **用户数据表**        | ✅ 完成 | 文档03 | users表结构、索引设计     |
| **审计日志**         | ✅ 完成 | 文档03 | audit\_logs表、操作记录 |

### 3.2 技术实现要点

**认证安全：**

* JWT Token认证机制（24小时有效期）

* bcrypt密码加密存储

* 登录操作审计日志记录

* Token自动验证和刷新

**前端交互：**

* 响应式登录界面设计

* 实时表单验证

* 密码显示/隐藏切换

* 加载状态和错误提示

**权限控制：**

* BOSS/EMPLOYEE角色区分

* 基于角色的功能权限控制

* 用户状态管理（激活/禁用）

### 3.3 数据流程图

```mermaid
flowchart LR
    A[Login页面] --> B[useAuth Hook]
    B --> C[认证API]
    C --> D[MySQL数据库]
    D --> E[JWT Token]
    E --> F[本地存储]
    F --> G[权限验证]
    G --> H[页面跳转]
```

### 三、高频问题查询映射（快速定位）

#### 3.1 采购录入页面（完整版）

**关键词：** 采购录入、相机拍照、豆包AI识别、供应商管理、图片上传、表单验证

**相关文档：**

* 文档01：豆包AI解析功能规范、相机功能第三方插件配置

* 文档02：采购创建API接口规范、图片上传接口规范

* 文档03：采购表字段设计、产品类型配置规范

* 文档04：PurchaseEntry组件完整实现、相机功能组件规范

* 文档05：采购录入完整业务流程、AI识别流程

**核心功能模块：**

**1. 相机功能模块：**

* react-html5-camera-photo插件集成

* 浏览器兼容性检查（HTTPS、getUserMedia）

* 开发环境下的宽松模式

* 相机错误边界组件

* 拍照上传处理（dataUri -> Blob -> FormData）

**2. 豆包AI识别模块：**

* 自然语言采购描述解析

* 字段映射规则（camelCase -> snake\_case）

* AI服务配置和错误处理

* 置信度验证和结果处理

* 自动填充表单字段

**3. 供应商管理模块：**

* 供应商列表加载和权限控制

* 防抖搜索和下拉选择

* 新供应商创建流程

* 数据去重和一致性处理

* 输入失焦延迟隐藏

**4. 产品类型和字段管理：**

* 4种产品类型的动态字段配置

* 散珠、手串、饰品配件、成品的验证规则

* 价格计算逻辑（三选二自动计算）

* 单位类型自动映射

**5. 图片上传和处理：**

* react-dropzone文件上传

* 多种格式支持（JPEG、PNG、WEBP）

* Base64图片处理和Blob转换

* 图片URL修复和协议处理

* 文件验证和错误处理

* 本地存储防丢失机制

**6. 状态管理和持久化：**

* 复杂状态管理（uploading、aiParsing、submitting等）

* localStorage防抖保存

* 页面刷新数据恢复

* 错误状态清理和重试机制

| 问题类型              | 具体问题           | 查询文档                                           | 章节位置                      |
| ----------------- | -------------- | ---------------------------------------------- | ------------------------- |
| **用户认证**          | 登录接口参数格式       | 文档02                                           | 2.1.1 用户登录接口详细规范          |
| **用户认证**          | Token验证机制      | 文档02                                           | 2.1.2 Token验证接口           |
| **用户认证**          | 登录组件实现         | 文档04                                           | 3.1 Login页面组件规范           |
| **用户认证**          | useAuth Hook用法 | 文档04                                           | 3.2 useAuth Hook规范        |
| **用户认证**          | 登录业务流程         | 文档05                                           | 2.1 用户登录流程                |
| **用户认证**          | 用户表结构          | 文档03                                           | 3.1 用户表（users）            |
| **接口对接**          | 采购接口参数格式       | 文档02                                           | 2.2 采购管理接口                |
| **接口对接**          | 错误码含义查询        | 文档02                                           | 3.2 错误码统一表                |
| **数据库**           | 采购表字段说明        | 文档03                                           | 三.1 采购表核心字段               |
| **数据库**           | 库存视图 SQL       | 文档03                                           | 1.3 库存视图（inventory\_view） |
| **前端开发**          | 采购录入组件         | 文档04                                           | 四 核心组件实现                  |
| **前端开发**          | 权限控制实现         | 文档04                                           | 3.3 响应式设计规范               |
| **业务流程**          | 采购录入完整流程       | 文档05                                           | 三.1 采购录入流程                |
| **业务流程**          | 库存管理流程         | 文档05                                           | 四.1 库存查询流程                |
| **错误处理**          | 前端错误拦截         | 文档04                                           | 10.3 错误处理                 |
| **权限安全**          | 角色权限矩阵         | 文档03                                           | 三.1.3 用户表字段说明             |
| 采购编号生成规则是什么？      | 数据库设计文档        | 3.3 采购表结构、6.2generate\_purchase\_code 函数       | <br />                    |
| 雇员不能查看哪些字段？       | 权限与安全规范文档      | 1.1 权限矩阵、2.1 敏感字段清单                            | <br />                    |
| 成品销毁后库存如何回滚？      | 业务流程文档         | 6.3 成品销毁流程、数据库事务 SQL                           | <br />                    |
| API 接口前缀是什么？      | API 接口规范文档     | 1.1 基础规范、4.2 后端路由前缀                            | <br />                    |
| 鸿蒙端 Button 如何适配？  | UI/UX 设计规范文档   | 3.1 组件映射表、3.2 事件桥接示例                           | <br />                    |
| 数据库如何自动备份？        | 部署运维规范文档       | 2.1 备份脚本、2.2Crontab 配置                         | <br />                    |
| **采购记录编辑功能**      | <br />         | <br />                                         | <br />                    |
| 采购记录如何编辑？         | 业务流程文档         | 4.8 采购记录编辑业务流程、权限验证流程                          | <br />                    |
| 价格三选二计算逻辑？        | React前端规范文档    | 3.1.1 价格三选二计算逻辑、业务流程文档 4.8.3                   | <br />                    |
| 串数颗数如何计算？         | React前端规范文档    | 3.1.2 串数颗数计算逻辑、业务流程文档 4.8.4                    | <br />                    |
| 建议数值如何显示？         | React前端规范文档    | 3.1.4 建议值显示规范、UI显示规则                           | <br />                    |
| 字段验证规则更新？         | API接口规范文档      | 2.2.2 字段验证规则、数据库设计文档 3.1 字段约束更新                | <br />                    |
| 修改历史如何记录？         | 业务流程文档         | 4.8.7 修改历史记录业务规则、数据库设计文档 edit\_logs表           | <br />                    |
| 编辑权限如何控制？         | 业务流程文档         | 4.8.2 编辑权限验证流程、权限与安全规范文档                       | <br />                    |
| AI识别如何配置和调用？      | 系统架构文档         | 2.3.1 豆包AI配置、API接口规范文档 4.7 AI接口                | <br />                    |
| 网络连接失败如何处理？       | 错误处理规范文档       | 3.3 智能重试机制、API接口规范文档 5.5 网络检测                  | <br />                    |
| 如何在开发环境调试API？     | React前端开发规范文档  | 2.4 调试工具组件、系统架构文档 2.4 调试工具配置                   | <br />                    |
| 阿里云部署如何配置？        | 部署运维规范文档       | 3.1 宝塔面板配置、3.2 安全组配置、3.3 域名解析配置                | <br />                    |
| 手机端如何访问API？       | 部署运维规范文档       | 5.2 手机端测试配置、5.1 动态IP检测配置                       | <br />                    |
| 供应商权限如何控制？        | 权限与安全规范文档      | 3.1.2 供应商功能权限控制、3.2.2 供应商API权限验证               | <br />                    |
| 供应商选择功能如何实现？      | React前端开发规范文档  | 2.2 供应商选择逻辑、2.4.2 供应商调试工具                      | <br />                    |
| 供应商API接口有哪些？      | API接口规范文档      | 2.5 供应商管理接口、2.5.4 供应商调试端点                      | <br />                    |
| 供应商数据一致性如何保证？     | 业务流程详细规范文档     | 3.2.3 供应商数据一致性验证流程                             | <br />                    |
| 供应商调试功能如何使用？      | React前端开发规范文档  | 2.4.2 供应商调试工具、错误处理与测试规范文档 4.2.3 供应商调试端点        | <br />                    |
| 供应商管理流程是什么？       | 业务流程详细规范文档     | 1.4.1 供应商权限验证流程、3.1.1 供应商权限验证流程                | <br />                    |
| 供应商功能测试如何验证？      | 错误处理与测试规范文档    | 4.2.4 供应商功能测试验证                                | <br />                    |
| 供应商错误码有哪些？        | API接口规范文档      | 3.2 错误码表（DUPLICATE\_SUPPLIER\_NAME等）           | <br />                    |
| **采购记录删除功能**      | <br />         | <br />                                         | <br />                    |
| 采购记录如何安全删除？       | 业务流程文档         | 3.2 采购记录删除流程、业务约束验证流程                          | <br />                    |
| 删除权限如何控制？         | API接口规范文档      | 2.2.1 采购删除接口详细规范、权限验证规则                        | <br />                    |
| 业务约束冲突如何处理？       | 错误处理规范文档       | 1.2 业务约束错误响应示例、BUSINESS\_CONSTRAINT\_VIOLATION | <br />                    |
| 删除确认对话框如何实现？      | React前端规范文档    | 8.1.1 删除确认对话框设计、UI组件结构                         | <br />                    |
| 如何避免重复错误提示？       | React前端规范文档    | 8.2.1 避免重复错误提示、错误处理最佳实践                        | <br />                    |
| 成品使用珠子时如何提示？      | 业务流程文档         | 3.2.4 业务约束冲突异常处理、友好错误提示设计                      | <br />                    |
| 删除操作如何记录日志？       | 业务流程文档         | 3.2.3 数据完整性规则、审计日志记录规范                         | <br />                    |
| 删除API接口规范是什么？     | API接口规范文档      | 2.2.1 采购删除接口详细规范、响应数据结构                        | <br />                    |
| 删除错误码有哪些？         | 错误处理规范文档       | 1.1 错误类型枚举（PURCHASE\_DELETE\_FAILED等）          | <br />                    |
| AI功能如何配置和使用？      | 系统架构文档         | 2.1 豆包AI配置与服务规范、API接口规范文档 2.4 AI智能服务接口         | <br />                    |
| AI解析采购描述如何实现？     | React前端开发规范文档  | 2.2 AI识别调用实现、2.4 AI服务类完整实现规范                   | <br />                    |
| 智能助理功能如何使用？       | API接口规范文档      | 2.4.3 智能助理对话接口、2.4.4 业务洞察分析接口                  | <br />                    |
| AI服务健康检查如何实现？     | 系统架构文档         | 2.1.6 AI服务错误处理策略、API接口规范文档 2.4.2 健康检查接口        | <br />                    |
| AI权限控制如何配置？       | 系统架构文档         | 2.1.5 AI功能权限控制、权限与安全规范文档 1.1 权限矩阵              | <br />                    |
| AI解析结果如何验证？       | React前端开发规范文档  | 2.4 validateAIParseResult工具函数、字段映射规则           | <br />                    |
| AI调试功能如何使用？       | React前端开发规范文档  | 2.5 调试工具组件、window\.apiDebug.testAI()方法         | <br />                    |
| 字段命名规范是什么？        | API接口统一规范文档    | 6.1 命名规范定义、6.2 字段转换机制                          | <br />                    |
| 批量转换工具如何安全使用？     | 错误处理与测试规范文档    | 5.1 批量转换教训总结、5.3 安全转换流程                        | <br />                    |
| 哪些内容禁止批量转换？       | 错误处理与测试规范文档    | 5.2 绝对禁止转换清单、5.4 智能识别机制                        | <br />                    |
| 转换工具使用流程是什么？      | 部署运维规范文档       | 6.1 批量转换工具使用规范、6.2 代码质量保证机制                    | <br />                    |
| **成品制作功能**        | <br />         | <br />                                         | <br />                    |
| 成品制作模式有哪些？        | 业务流程文档         | 9.1 成品制作模式定义、9.1.1 直接转化模式、9.1.2 组合模式           | <br />                    |
| 成品制作权限如何控制？       | 业务流程文档         | 9.2.1 权限验证流程、API接口规范文档 9.3 权限控制规则              | <br />                    |
| 成品制作API接口有哪些？     | API接口规范文档      | 7.1 成品制作接口清单、7.2 成品创建接口详细规范                    | <br />                    |
| 成品编号生成规则是什么？      | 数据库设计文档        | 1.2 成品编号生成规则、API接口规范文档 9.1 成品编号生成规则            | <br />                    |
| 成品库存如何管理？         | 业务流程文档         | 9.3 成品库存管理流程、9.3.1 成品状态管理                      | <br />                    |
| 成品成本如何计算？         | API接口规范文档      | 7.5 成本计算接口详细规范、9.1 成本计算规则                      | <br />                    |
| 原材料库存如何验证？        | 业务流程文档         | 9.2.2 数据验证规则、API接口规范文档 9.1 库存充足性验证             | <br />                    |
| 成品制作事务如何保证？       | 数据库设计文档        | 3.1 成品制作流程数据变更、3.2 库存计算规则                      | <br />                    |
| 批量创建成品如何实现？       | API接口规范文档      | 7.2.2 批量创建成品（直接转化模式）                           | <br />                    |
| 成品查询筛选如何实现？       | 业务流程文档         | 9.3.2 成品查询和筛选流程、API接口规范文档 7.3 成品查询接口           | <br />                    |
| **成品销售功能**        | <br />         | <br />                                         | <br />                    |
| 成品销售流程是什么？        | 业务流程文档         | 10.1 成品销售流程、10.1.1 销售操作流程                      | <br />                    |
| 销售记录如何创建？         | API接口规范文档      | 7.4 成品销售接口详细规范、8.1 销售记录接口清单                    | <br />                    |
| 销售编号生成规则是什么？      | 数据库设计文档        | 1.4 销售编号生成规则、API接口规范文档 9.2 销售编号生成规则            | <br />                    |
| 销售利润如何计算？         | 业务流程文档         | 10.1.2 销售数据计算规则、API接口规范文档 9.1 成本计算规则           | <br />                    |
| 销售记录如何查询？         | API接口规范文档      | 8.2 销售记录查询接口详细规范、8.3 销售统计分析接口                  | <br />                    |
| 销售权限如何控制？         | API接口规范文档      | 9.3 权限控制规则、业务流程文档 10.2.1 销售记录查询流程              | <br />                    |
| 销售记录如何修改？         | 业务流程文档         | 10.2.2 销售记录修改流程、API接口规范文档 8.1 销售记录接口清单         | <br />                    |
| 销售记录如何删除？         | 业务流程文档         | 10.4 销售记录删除流程、10.4.1 删除权限和约束                   | <br />                    |
| 销售统计如何分析？         | API接口规范文档      | 8.3 销售统计分析接口、业务流程文档 10.3 销售统计分析流程              | <br />                    |
| 成品状态如何变更？         | 业务流程文档         | 9.3.1 成品状态管理、API接口规范文档 9.2 成品状态变更规则            | <br />                    |
| **数据库设计相关**       | <br />         | <br />                                         | <br />                    |
| MaterialUsage表结构？ | 数据库设计文档        | 1.3 原材料使用记录表（material\_usage）核心字段              | <br />                    |
| 销售记录表结构是什么？       | 数据库设计文档        | 1.4 销售记录数据结构设计、5.3 销售记录表DDL                    | <br />                    |
| 成品制作数据流转规则？       | 数据库设计文档        | 3.1 成品制作流程数据变更、3.2 库存计算规则                      | <br />                    |
| 成品销售数据更新规则？       | 数据库设计文档        | 4.1 销售记录创建流程、4.2 成本和利润计算                       | <br />                    |
| 外键约束如何配置？         | 数据库设计文档        | 1.3 外键约束配置、1.3 数据完整性保证                         | <br />                    |
| **错误处理相关**        | <br />         | <br />                                         | <br />                    |
| 成品制作错误码有哪些？       | API接口规范文档      | 10.2 业务错误码定义、FinishedProductErrors             | <br />                    |
| 销售记录错误码有哪些？       | API接口规范文档      | 10.2 业务错误码定义、SalesRecordErrors                 | <br />                    |
| 库存不足如何处理？         | API接口规范文档      | 9.1 库存充足性验证、业务流程文档 9.2.2 数据验证规则                | <br />                    |
| 成品制作失败如何回滚？       | 数据库设计文档        | 3.1 成品制作流程数据变更、事务处理机制                          | <br />                    |
| **库存仪表盘功能**       | <br />         | <br />                                         | <br />                    |
| 库存仪表盘有哪些功能？       | 业务流程文档         | 4.7 库存仪表盘流程、4.7.3 仪表盘核心功能模块                    | <br />                    |
| 库存统计API如何调用？      | API接口规范文档      | 2.3.1 库存统计接口详细规范、响应数据结构                        | <br />                    |
| 产品分布图表如何实现？       | 业务流程文档         | 4.7.3 产品分布饼图模块、颜色配置规范                          | <br />                    |
| 价格分布分析如何配置？       | API接口规范文档      | 2.3.3 价格分布接口详细规范、价格区间定义                        | <br />                    |
| 库存消耗分析如何使用？       | 业务流程文档         | 4.7.3 库存消耗分析模块、时间范围选择                          | <br />                    |
| 仪表盘权限如何控制？        | 业务流程文档         | 4.7.4 权限控制与数据过滤、敏感字段清单                         | <br />                    |
| 低库存预警规则是什么？       | 业务流程文档         | 4.7.6 仪表盘业务规则、低库存预警规则                          | <br />                    |
| 仪表盘数据如何刷新？        | 业务流程文档         | 4.7.5 数据刷新与缓存策略、自动刷新机制                         | <br />                    |
| 库存价格区间如何定义？       | API接口规范文档      | 2.3.3 价格区间定义（成品）、价格范围说明                        | <br />                    |
| 仪表盘图表如何交互？        | 业务流程文档         | 4.7.3 图表交互功能、事件处理逻辑                            | <br />                    |
| **成品制作功能**        | <br />         | <br />                                         | <br />                    |
| 成品制作概念如何理解？       | 业务流程文档         | 7.1.1 重要概念区分、原材料成品vs销售成品                       | <br />                    |
| 成品制作有哪些模式？        | 业务流程文档         | 7.1.2 成品制作两种模式、直接转化批量创建vs组合制作                  | <br />                    |
| 直接转化批量创建流程？       | 业务流程文档         | 7.2.2 直接转化模式流程、多选原材料批量信息填写                     | <br />                    |
| 组合制作流程是什么？        | 业务流程文档         | 7.2.2 组合制作模式流程、多种原材料组合制作                       | <br />                    |
| 成品制作成本如何计算？       | 业务流程文档         | 7.2.4 成本计算业务规则、材料+人工+工艺成本                      | <br />                    |
| 销售成品如何管理？         | 业务流程文档         | 7.3 销售成品管理流程、状态管理和列表展示                         | <br />                    |
| 成品销毁如何回滚库存？       | 业务流程文档         | 7.5 成品销毁流程、库存回滚逻辑和事务处理                         | <br />                    |
| 成品制作数据表结构？        | 数据库设计文档        | 1.2 成品表（products）、1.3 原材料使用记录表                 | <br />                    |
| 原材料使用记录如何存储？      | 数据库设计文档        | 1.3 原材料使用记录表、库存扣减和成本追踪                         | <br />                    |
| 成品制作API接口有哪些？     | API接口规范文档      | 2.6 成品制作管理接口、创建/批量创建/查询/销毁接口                   | <br />                    |
| 批量创建成品API如何调用？    | API接口规范文档      | 2.6.2 批量创建销售成品接口、直接转化模式专用                      | <br />                    |
| 可用原材料如何查询？        | API接口规范文档      | 2.6.3 获取可用原材料接口、库存验证和筛选逻辑                      | <br />                    |
| 成品制作组件如何实现？       | React前端规范文档    | 6.1 ProductEntry组件、制作流程和状态管理                   | <br />                    |
| 批量信息填写组件如何设计？     | React前端规范文档    | 6.1.4 BatchProductEditor组件、批量编辑和成本计算           | <br />                    |
| 成品展示组件如何设计？       | React前端规范文档    | 6.2 FinishedProductGrid组件、成品列表和详情展示            | <br />                    |
| 成品制作权限如何控制？       | React前端规范文档    | 6.2.4 权限控制实现、敏感信息过滤规范                          | <br />                    |
| 成品状态如何管理？         | React前端规范文档    | 6.2.3 成品状态管理、可售/已售/预留状态切换                      | <br />                    |

### 四、高频问题查询映射（更新采购列表功能）

| 问题类型             | 关键词                                    | 对应文档章节                           | 快速定位               |
| ---------------- | -------------------------------------- | -------------------------------- | ------------------ |
| **采购记录编辑功能**     | <br />                                 | <br />                           | <br />             |
| 编辑权限控制           | 编辑权限、BOSS角色、权限验证、编辑按钮                  | 《权限与安全规范文档》1.1、《业务流程文档》3.3.2     | 仅BOSS角色可编辑         |
| 编辑模式初始化          | 编辑模式、字段初始化、产品类型、editData               | 《React前端规范文档》4.1.2、《业务流程文档》3.3.3 | 根据产品类型动态初始化        |
| 字段变更检测           | 字段变更、updateData、变更检测、字段映射              | 《React前端规范文档》4.1.3、《业务流程文档》3.3.4 | 实时检测字段变化           |
| 编辑API接口          | PUT接口、采购更新、字段验证、权限验证                   | 《API接口规范文档》2.2.2、《业务流程文档》3.3.5   | 采购记录更新接口规范         |
| 修改历史记录           | 修改历史、EditLog、变更详情、历史显示                 | 《数据库设计文档》3.9、《业务流程文档》3.3.7       | edit\_logs表设计和显示   |
| 派生字段计算           | 派生字段、total\_beads、自动计算、优先级             | 《API接口规范文档》2.2.2、《业务流程文档》3.3.6   | 自动计算业务逻辑           |
| 编辑错误处理           | 编辑错误、权限不足、验证失败、错误提示                    | 《错误处理与测试规范文档》1.2、《业务流程文档》3.3.9   | 编辑功能错误处理策略         |
| **价格计算架构变更（重要）** | <br />                                 | <br />                           | <br />             |
| 价格计算架构变更         | 前端计算、后端存储、架构变更、价格字段                    | 《系统架构文档》1.4、《数据库设计文档》1.1.2       | 从前端计算改为后端存储的重要架构变化 |
| 单颗价格存储           | pricePerBead、每颗价格、后端计算、数据库存储           | 《数据库设计文档》1.1.2、《API接口规范文档》2.2.1  | 每颗价格现在后端计算并存储      |
| 单片价格存储           | pricePerPiece、每片价格、饰品配件、成品             | 《数据库设计文档》1.1.2、《业务流程文档》3.3.6     | 每片/件价格后端计算逻辑       |
| 单价字段存储           | unitPrice、通用单价、所有产品类型                  | 《数据库设计文档》1.1.2、《API接口规范文档》2.2.1  | 通用单价字段计算规则         |
| 价格计算时机           | 录入时计算、更新时计算、数据迁移                       | 《API接口规范文档》2.2.1、《业务流程文档》3.3.6   | 价格字段计算的触发时机        |
| 计算字段精度           | DECIMAL精度、4位小数、1位小数                    | 《数据库设计文档》1.1.2、《系统架构文档》1.4       | 不同价格字段的精度规范        |
| 架构优势说明           | 数据一致性、性能提升、查询效率                        | 《系统架构文档》1.4、《业务流程文档》3.3.6        | 新架构的优势和改进点         |
| **采购列表核心功能**     | <br />                                 | <br />                           | <br />             |
| 表头筛选功能           | 表头筛选、筛选面板、位置计算、Portal                  | 《React前端规范文档》4.1-4.7             | 6种筛选类型、位置计算、外部关闭   |
| 多维度筛选            | 产品类型筛选、品相筛选、供应商筛选                      | 《API接口规范文档》2.2.1、《业务流程文档》3.2.4   | 多选、null处理、全选状态     |
| 智能排序功能           | 规格排序、数量排序、克价排序、动态字段                    | 《数据库设计文档》1.2.2、《业务流程文档》3.2.5     | 原生SQL、动态字段选择       |
| 跨页筛选保持           | 跨页筛选、localStorage、状态保持                 | 《React前端规范文档》4.6、《业务流程文档》3.2.6   | 筛选状态持久化            |
| 权限控制筛选           | 权限控制、敏感字段、BOSS、EMPLOYEE                | 《API接口规范文档》2.2.1、《业务流程文档》3.2.7   | 价格字段权限过滤           |
| **筛选参数映射**       | <br />                                 | <br />                           | <br />             |
| 规格筛选逻辑           | 规格筛选、specification、bead\_diameter、动态查询 | 《API接口规范文档》2.2.1、《数据库设计文档》1.2.3  | 同时查询两个字段           |

### 五、库存查询多视图功能映射（新增）

| 问题类型           | 关键词                                                       | 对应文档章节                           | 快速定位                          |
| -------------- | --------------------------------------------------------- | -------------------------------- | ----------------------------- |
| **库存查询总体架构**   | <br />                                                    | <br />                           | <br />                        |
| 多视图切换          | 视图切换、层级式、分组、配件、成品、仪表盘                                     | 《React前端规范文档》5.1、《业务流程文档》4.1     | 5种视图类型切换逻辑                    |
| 库存API接口        | 库存接口、hierarchical、grouped、accessories、finished、statistics | 《API接口规范文档》2.3、《业务流程文档》4.1.2     | 4个新增库存API接口                   |
| 筛选状态管理         | 筛选状态、跨视图保持、localStorage、状态同步                              | 《React前端规范文档》5.7、《业务流程文档》4.7     | 筛选条件跨视图保持                     |
| **层级式库存视图**    | <br />                                                    | <br />                           | <br />                        |
| 树形结构展示         | 树形结构、节点展开、层级导航、HierarchicalNode                           | 《React前端规范文档》5.2、《业务流程文档》4.2     | 4层树形结构设计                      |
| 节点状态管理         | 节点状态、展开折叠、expanded、children                               | 《React前端规范文档》5.2、《业务流程文档》4.2.2   | 节点交互逻辑                        |
| 层级数据结构         | 数据层级、产品类型、品相、供应商、库存项目                                     | 《API接口规范文档》2.3.1、《业务流程文档》4.2.3   | 4层数据结构定义                      |
| **分组库存列表**     | <br />                                                    | <br />                           | <br />                        |
| 动态分组功能         | 动态分组、GROUP BY、分组统计、GroupedData                            | 《React前端规范文档》5.3、《业务流程文档》4.3     | 3种分组方式配置                      |
| 分组配置规范         | 分组配置、product\_type、quality、supplier\_name                 | 《API接口规范文档》2.3.2、《业务流程文档》4.3.3   | 分组字段和统计信息                     |
| 分组统计信息         | 分组统计、total\_quantity、total\_value、item\_count             | 《React前端规范文档》5.3、《业务流程文档》4.3.2   | 分组内统计计算                       |
| **半成品矩阵视图**    | <br />                                                    | <br />                           | <br />                        |
| 矩阵布局展示         | 矩阵视图、SemiFinishedMatrixView、按尺寸、按品相                       | 《React前端规范文档》5.5、《业务流程文档》4.4     | 2种矩阵模式切换                      |
| 矩阵数据结构         | 矩阵数据、MatrixCell、散珠手串、库存状态                                 | 《API接口规范文档》2.3.1、《业务流程文档》4.4.3   | 矩阵单元格数据定义                     |
| 库存状态编码         | 状态颜色、低库存、中等库存、充足库存                                        | 《React前端规范文档》5.5、《业务流程文档》4.4.3   | 红黄绿三色编码规则                     |
| 产品筛选功能         | 产品筛选、搜索关键词、产品选择、筛选应用                                      | 《React前端规范文档》5.5、《业务流程文档》4.4.2   | 矩阵数据筛选机制                      |
| **饰品配件专用视图**   | <br />                                                    | <br />                           | <br />                        |
| 配件网格布局         | 配件网格、AccessoriesProductGrid、卡片布局                          | 《React前端规范文档》5.4、《业务流程文档》4.5     | 网格布局和卡片设计                     |
| 配件筛选功能         | 配件筛选、材质筛选、规格查询、category                                   | 《API接口规范文档》2.3.3、《业务流程文档》4.5.2   | 配件专用筛选器                       |
| 配件数据结构         | 配件数据、AccessoryItem、材质、规格、分类                               | 《React前端规范文档》5.4、《业务流程文档》4.5.3   | 配件字段定义                        |
| **成品卡片视图**     | <br />                                                    | <br />                           | <br />                        |
| 成品卡片布局         | 成品卡片、FinishedProductGrid、利润展示                             | 《React前端规范文档》5.6、《业务流程文档》4.6     | 卡片式成品展示                       |
| 成品状态管理         | 成品状态、available、sold、reserved、状态筛选                         | 《API接口规范文档》2.3.4、《业务流程文档》4.6.2   | 3种成品状态管理                      |
| 利润计算显示         | 利润计算、cost、selling\_price、profit\_margin                   | 《React前端规范文档》5.6、《业务流程文档》4.6.3   | 成本利润计算逻辑                      |
| 材料追溯功能         | 材料追溯、MaterialUsage、材料清单、quantity\_used                    | 《API接口规范文档》2.3.4、《业务流程文档》4.6.3   | 成品材料组成追溯                      |
| **库存仪表盘**      | <br />                                                    | <br />                           | <br />                        |
| 统计数据展示         | 统计数据、DashboardStatistics、指标卡片                             | 《React前端规范文档》5.7、《业务流程文档》4.7     | 关键指标统计展示                      |
| 分布图表显示         | 分布图表、产品类型分布、品相分布、价值分布                                     | 《API接口规范文档》2.3.5、《业务流程文档》4.7.3   | 多维度分布统计                       |
| 预警监控功能         | 预警监控、低库存、缺货、recent\_changes                               | 《React前端规范文档》5.7、《业务流程文档》4.7.2   | 库存预警和变化监控                     |
| 仪表盘数据加载        | 数据加载、并行查询、统计汇总、趋势计算                                       | 《API接口规范文档》2.3.5、《业务流程文档》4.7.2   | 多维度并行统计查询                     |
| **库存数据导出**     | <br />                                                    | <br />                           | <br />                        |
| 导出功能实现         | 数据导出、Excel、CSV、导出范围、权限控制                                  | 《API接口规范文档》2.3、《业务流程文档》4.8       | 多格式数据导出                       |
| 导出权限控制         | 导出权限、BOSS、EMPLOYEE、敏感字段过滤                                 | 《业务流程文档》4.8.2、《权限与安全规范文档》1.1     | 基于角色的导出权限                     |
| 导出数据格式         | 导出格式、字段映射、基础信息、价格信息                                       | 《业务流程文档》4.8.2、《API接口规范文档》2.3     | 导出字段规范定义                      |
| **通用筛选功能**     | <br />                                                    | <br />                           | <br />                        |
| 筛选条件管理         | 筛选条件、产品类型、品相、供应商、价格范围                                     | 《业务流程文档》4.8.1、《React前端规范文档》5.8   | 6种通用筛选字段                      |
| 筛选状态同步         | 状态同步、localStorage、跨视图保持、参数验证                              | 《业务流程文档》4.8.2、《React前端规范文档》5.8   | 筛选状态持久化机制                     |
| 筛选API参数        | API参数、筛选映射、字段转换、查询优化                                      | 《API接口规范文档》2.3、《业务流程文档》4.8.2     | 筛选参数标准化                       |
| 品相null处理       | 品相筛选、UNKNOWN、null值处理                                      | 《API接口规范文档》2.2.1、《业务流程文档》3.2.4   | UNKNOWN映射为null                |
| 供应商多选          | 供应商筛选、多选、模糊匹配、精确匹配                                        | 《API接口规范文档》2.2.1、《业务流程文档》3.2.4   | 支持字符串和数组格式                    |
| 克价null处理       | 克价筛选、null值视为0、COALESCE                                    | 《API接口规范文档》2.2.1、《数据库设计文档》1.2.2  | null值特殊处理                     |
| 日期范围处理         | 日期筛选、startDate、endDate、时间处理                               | 《API接口规范文档》2.2.1、《业务流程文档》3.2.4   | 自动设置时间边界                      |
| **数据库优化**      | <br />                                                    | <br />                           | <br />                        |
| 索引设计           | 索引优化、复合索引、筛选性能                                            | 《数据库设计文档》1.2.1                   | 筛选和排序索引配置                     |
| 复杂查询SQL        | 复杂筛选、多维度查询、原生SQL                                          | 《数据库设计文档》1.2.3                   | 多条件组合查询                       |
| 查询性能优化         | 分页优化、游标分页、缓存策略                                            | 《数据库设计文档》1.2.4                   | 大数据量查询优化                      |
| **前端实现**       | <br />                                                    | <br />                           | <br />                        |
| 防抖搜索           | 防抖搜索、300ms、debounce                                       | 《React前端规范文档》4.7                 | 搜索性能优化                        |
| 筛选面板Portal     | Portal组件、createPortal、筛选面板                                | 《React前端规范文档》4.4                 | 筛选面板渲染                        |
| 外部点击关闭         | 外部点击、事件监听、筛选面板关闭                                          | 《React前端规范文档》4.3                 | 交互体验优化                        |
| 多选筛选器          | 多选组件、全选、取消全选                                              | 《React前端规范文档》4.5                 | 多选状态管理                        |
| 范围筛选器          | 范围筛选、最小值、最大值、验证                                           | 《React前端规范文档》4.5                 | 范围值验证                         |
| **业务流程**       | <br />                                                    | <br />                           | <br />                        |
| 采购列表查询流程       | 采购列表、查询流程、初始化                                             | 《业务流程文档》3.2.1-3.2.2              | 完整查询流程                        |
| 筛选操作流程         | 筛选操作、用户交互、状态管理                                            | 《业务流程文档》3.2.3                    | 筛选交互流程                        |
| 异常处理流程         | 筛选异常、网络异常、数据异常                                            | 《业务流程文档》3.2.9                    | 异常处理策略                        |
| **库存状态显示功能**   | <br />                                                    | <br />                           | <br />                        |
| 库存状态分级规则是什么？   | UI设计规范文档                                                  | 4.1 库存状态颜色编码、4.2 库存状态交互效果        | <br />                        |
| 库存为0如何显示？      | React前端规范文档                                               | 9.2 库存为0的显示处理、矩阵视图空单元格处理         | <br />                        |
| 低库存交互效果如何实现？   | React前端规范文档                                               | 9.3 低库存交互效果实现、灰度滤镜效果             | <br />                        |
| 库存状态颜色函数如何使用？  | React前端规范文档                                               | 9.1 getStockStatusColor函数实现      | <br />                        |
| 品相颜色标识如何配置？    | React前端规范文档                                               | 9.5 getQualityColor函数实现、品相颜色圆点显示 | <br />                        |
| 库存状态标识组件如何设计？  | React前端规范文档                                               | 9.4 库存状态标识组件、低库存警告标识             | <br />                        |
| 库存状态业务规则是什么？   | 业务流程文档                                                    | 8.1 库存状态分级业务规则、8.1.2 库存状态计算逻辑    | <br />                        |
| 不同视图中库存状态如何显示？ | 业务流程文档                                                    | 8.2 不同视图中的库存状态显示规范               | <br />                        |
| 库存状态如何自动更新？    | 业务流程文档                                                    | 8.3.1 库存状态自动更新机制                 | <br />                        |
| 低库存预警规则是什么？    | 业务流程文档                                                    | 8.3.2 低库存预警业务规则                  | <br />                        |
| 库存状态与业务决策如何关联？ | 业务流程文档                                                    | 8.4 库存状态与业务决策关联                  | <br />                        |
| 层级视图中库存为0如何处理？ | 业务流程文档                                                    | 8.2.1 层级式库存视图显示规范                | <br />                        |
| 矩阵视图中空单元格如何显示？ | 业务流程文档                                                    | 8.2.2 半成品矩阵视图显示规范                | <br />                        |
| 成品卡片中库存不足如何标识？ | 业务流程文档                                                    | 8.2.3 成品卡片视图显示规范                 | <br />                        |
| 库存状态视觉设计规范是什么？ | UI设计规范文档                                                  | 4.1-4.3 库存状态视觉设计规范               | <br />                        |
| **传统功能**       | <br />                                                    | <br />                           | <br />                        |
| 产品类型相关         | 产品类型、LOOSE\_BEADS、BRACELET                                | 《数据库设计文档》1.1.2、《业务流程文档》3.2.4     | 支持4种产品类型                      |
| API接口          | 接口、API、请求参数                                               | 《API接口规范文档》2.1-2.5               | 统一/api/v1/前缀                  |
| 数据库字段          | 字段、表结构、数据类型                                               | 《数据库设计文档》1.1、3.3-3.5             | 采购表、成品表、供应商表                  |
| 前端组件           | 组件、React、UI                                               | 《React前端规范文档》2.1-2.4、5.1-5.3     | 统一组件规范                        |
| 错误处理调试         | 错误、异常、调试                                                  | 《错误处理文档》2.1-3.3                  | 统一错误码和调试规范                    |
| 部署运维           | 部署、服务器、环境                                                 | 《部署运维文档》1.1-1.3                  | 阿里云+宝塔+MySQL                  |
| 业务流程           | 流程、操作、步骤                                                  | 《业务流程文档》1.1-1.4                  | 采购录入、成品制作、库存管理                |
| 字段命名规范         | 字段命名、snake\_case、camelCase                                | 《API接口规范文档》6.1-6.3               | API响应snake\_case，数据库camelCase |
| 批量转换安全         | 批量转换、转换工具、安全规范                                            | 《错误处理文档》5.1-5.4、《部署运维文档》6.1-6.3  | 转换前备份、分批转换、安全检查               |

