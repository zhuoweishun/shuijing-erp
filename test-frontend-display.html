<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试前端数字显示</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-case { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .result { font-weight: bold; color: #333; }
    </style>
</head>
<body>
    <h1>测试数字格式化显示</h1>
    
    <div class="test-case">
        <h3>测试案例1: 数字17</h3>
        <p>原始值: <span id="original1"></span></p>
        <p>toLocaleString(): <span id="formatted1" class="result"></span></p>
        <p>Number().toLocaleString(): <span id="number1" class="result"></span></p>
    </div>
    
    <div class="test-case">
        <h3>测试案例2: 字符串"17"</h3>
        <p>原始值: <span id="original2"></span></p>
        <p>toLocaleString(): <span id="formatted2" class="result"></span></p>
        <p>Number().toLocaleString(): <span id="number2" class="result"></span></p>
    </div>
    
    <div class="test-case">
        <h3>测试案例3: 字符串"0161"</h3>
        <p>原始值: <span id="original3"></span></p>
        <p>toLocaleString(): <span id="formatted3" class="result"></span></p>
        <p>Number().toLocaleString(): <span id="number3" class="result"></span></p>
    </div>
    
    <div class="test-case">
        <h3>测试案例4: 模拟API返回数据</h3>
        <p>模拟total_consumption: <span id="api-data"></span></p>
        <p>直接toLocaleString(): <span id="api-direct" class="result"></span></p>
        <p>Number().toLocaleString(): <span id="api-number" class="result"></span></p>
    </div>

    <script>
        // 测试案例1: 数字17
        const num1 = 17;
        document.getElementById('original1').textContent = num1 + ' (类型: ' + typeof num1 + ')';
        try {
            document.getElementById('formatted1').textContent = num1.toLocaleString() + ' 件';
        } catch (e) {
            document.getElementById('formatted1').textContent = '错误: ' + e.message;
        }
        try {
            document.getElementById('number1').textContent = Number(num1).toLocaleString() + ' 件';
        } catch (e) {
            document.getElementById('number1').textContent = '错误: ' + e.message;
        }
        
        // 测试案例2: 字符串"17"
        const str1 = "17";
        document.getElementById('original2').textContent = str1 + ' (类型: ' + typeof str1 + ')';
        try {
            document.getElementById('formatted2').textContent = str1.toLocaleString() + ' 件';
        } catch (e) {
            document.getElementById('formatted2').textContent = '错误: ' + e.message;
        }
        try {
            document.getElementById('number2').textContent = Number(str1).toLocaleString() + ' 件';
        } catch (e) {
            document.getElementById('number2').textContent = '错误: ' + e.message;
        }
        
        // 测试案例3: 字符串"0161"
        const str2 = "0161";
        document.getElementById('original3').textContent = str2 + ' (类型: ' + typeof str2 + ')';
        try {
            document.getElementById('formatted3').textContent = str2.toLocaleString() + ' 件';
        } catch (e) {
            document.getElementById('formatted3').textContent = '错误: ' + e.message;
        }
        try {
            document.getElementById('number3').textContent = Number(str2).toLocaleString() + ' 件';
        } catch (e) {
            document.getElementById('number3').textContent = '错误: ' + e.message;
        }
        
        // 测试案例4: 模拟API数据
        const apiData = { total_consumption: 17 };
        document.getElementById('api-data').textContent = apiData.total_consumption + ' (类型: ' + typeof apiData.total_consumption + ')';
        try {
            document.getElementById('api-direct').textContent = apiData.total_consumption.toLocaleString() + ' 件';
        } catch (e) {
            document.getElementById('api-direct').textContent = '错误: ' + e.message;
        }
        try {
            document.getElementById('api-number').textContent = Number(apiData.total_consumption).toLocaleString() + ' 件';
        } catch (e) {
            document.getElementById('api-number').textContent = '错误: ' + e.message;
        }
    </script>
</body>
</html>