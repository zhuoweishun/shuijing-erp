{
  "report_title": "数据库字段命名规范完整检查报告",
  "check_time": "2025-09-10T10:31:54.000Z",
  "database_type": "MySQL",
  "summary": {
    "total_inconsistencies": "严重",
    "primary_issue": "数据库字段命名混合使用驼峰和蛇形命名",
    "recommendation": "需要统一数据库字段命名规范"
  },
  "tables_checked": [
    {
      "table_name": "purchases",
      "total_fields": 30,
      "naming_analysis": {
        "camelCase_fields": [
          "purchase_code",
          "product_name",
          "min_stock_alert",
          "price_per_gram",
          "unit_price",
          "total_price",
          "bead_diameter",
          "beads_per_string",
          "total_beads",
          "price_per_bead",
          "pricePerPiece",
          "unit_type",
          "piece_count",
          "purchaseDate",
          "natural_language_input",
          "ai_recognition_result",
          "createdAt",
          "updatedAt",
          "supplierId",
          "userId",
          "lastEditedById"
        ],
        "snake_case_fields": [
          "material_type"
        ],
        "single_word_fields": [
          "id",
          "quantity",
          "weight",
          "quality",
          "specification",
          "photos",
          "notes",
          "status"
        ]
      },
      "inconsistency_count": 1,
      "inconsistency_percentage": "3.3%"
    }
  ],
  "critical_issues": [
    {
      "issue_type": "混合命名规范",
      "description": "数据库中同时存在驼峰命名和蛇形命名字段",
      "affected_tables": ["purchases"],
      "affected_fields": ["material_type"],
      "impact": "导致后端SQL查询字段名不匹配错误",
      "current_error": "p.materialType字段不存在，应为p.material_type"
    }
  ],
  "backend_code_impact": {
    "sql_queries_affected": [
      "inventory.ts中的层级式库存查询",
      "purchases.ts中的采购查询",
      "products.ts中的产品查询",
      "financial.ts中的财务查询"
    ],
    "prisma_schema_mapping": {
      "material_type": "@map(\"material_type\")",
      "status": "正确映射"
    }
  },
  "solutions": [
    {
      "option_1": {
        "title": "统一为驼峰命名（推荐）",
        "description": "将material_type改为materialType，保持与其他字段一致",
        "steps": [
          "1. 修改Prisma schema，移除@map映射",
          "2. 生成数据库迁移",
          "3. 更新后端SQL查询使用materialType"
        ],
        "pros": ["与现有字段命名一致", "符合JavaScript/TypeScript规范"],
        "cons": ["需要数据库迁移"]
      }
    },
    {
      "option_2": {
        "title": "统一为蛇形命名",
        "description": "将所有驼峰字段改为蛇形命名",
        "steps": [
          "1. 为所有驼峰字段添加@map映射",
          "2. 生成数据库迁移",
          "3. 大量修改后端SQL查询"
        ],
        "pros": ["符合数据库命名规范"],
        "cons": ["需要大量代码修改", "影响范围广"]
      }
    }
  ],
  "recommended_action": {
    "immediate": "选择方案1：将material_type改为materialType",
    "reason": "影响最小，只需修改一个字段，保持与现有代码一致性"
  }
}